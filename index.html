<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estudio Pal√≠ndromo - Inicio</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat&family=Cinzel+Decorative:wght@700&family=MedievalSharp&family=Gaegu:wght@400;700&family=Cormorant+Garamond:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header id="page-header">
        <div class="container header-container">
            <nav class="header-menu-lado">
                <a href="#la-fortuna" class="menu-circulo"><img src="imagenes/icono-fortuna.png" alt="La Fortuna"></a>
                <a href="#dante-en-la-playa" class="menu-circulo"><img src="imagenes/icono-dante.png" alt="Dante en la Playa"></a>
            </nav>
            <a href="#" class="header-titulo">Estudio Pal√≠ndromo</a>
            <nav class="header-menu-lado">
                <a href="#poemas-apestosos" class="menu-circulo"><img src="imagenes/icono-poemas.png" alt="Poemas Apestosos"></a>
            </nav>
        </div>
    </header>
    
    <main>
        <section class="hero-sirena">
            <div class="hero-background">
                 <img src="imagenes/sirena-portada.jpg" alt="Logo de Estudio Pal√≠ndromo: Sirena con c√°mara cinematogr√°fica" class="sirena-img">
            </div>
            <h1 class="titulo-hero">Estudio Pal√≠ndromo</h1>
        </section>

        <section id="sobre-nosotros" class="seccion-contenido">
            <div class="container dark-container">
                <h2>Sobre Nosotros</h2>
                <div class="slider-container">
                    <div class="slides">
                        <div class="slide">
                            <h3>Joshua Solana</h3>
                            <div class="about-layout">
                                <div class="about-column about-text">
                                    <p>Soy un productor creativo, escritor cultural y educador audiovisual con experiencia en proyectos interdisciplinarios. He trabajado tanto en espacios educativos como en medios culturales, y me interesa colaborar con equipos que valoren la imaginaci√≥n, la escritura y el pensamiento visual.</p>
                                    <div class="social-links-section">
                                        <a href="https://www.linkedin.com/in/joshs0lana/" target="_blank" class="social-icon-circle"><img src="imagenes/linkedin-icon.png" alt="LinkedIn"></a>
                                        <a href="https://www.imdb.com/name/nm13304009/?ref_=ext_shr_lnk" target="_blank" class="social-icon-circle"><img src="imagenes/imdb.png" alt="IMDb"></a>
                                        <a href="https://www.instagram.com/joshsolana_/" target="_blank" class="social-icon-circle"><img src="imagenes/instagram-icon.png" alt="Instagram"></a>
                                        <a href="mailto:josh.adriansolana2@gmail.com" class="social-icon-circle"><img src="imagenes/Mail.png" alt="Email"></a>
                                    </div>
                                </div>
                                <div class="about-column about-media"><div class="vimeo-container"><iframe src="https://player.vimeo.com/video/1052665636?h=06da0ad355&title=0&byline=0&portrait=0" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe></div></div>
                            </div>
                        </div>
                        <div class="slide">
                            <h3>Samantha Solana</h3>
                            <div class="about-layout">
                                <div class="about-column about-text">
                                    <p>Artista visual con un profundo inter√©s en el dibujo, la cer√°mica y el grabado. Para m√≠, el arte es una experiencia vital que me permite explorar el mundo, formar mi cosmovisi√≥n y entender mi propia identidad. Mi obra busca conectar con el car√°cter antropol√≥gico y la magia de la vida.</p>
                                    <div class="social-links-section">
                                        <a href="#" target="_blank" class="enlace-guion small-button">Ver Galer√≠a</a>
                                        <a href="https://www.instagram.com/samantha_solana" target="_blank" class="social-icon-circle"><img src="imagenes/instagram-icon.png" alt="Instagram"></a>
                                        <a href="mailto:samantha.solana.art@email.com" class="social-icon-circle"><img src="imagenes/Mail.png" alt="Email"></a>
                                    </div>
                                </div>
                                <div class="about-column about-media"><div class="instagram-grid"><a href="#" class="grid-item"><img src="imagenes/insta-sam-01.jpg" alt="Obra 1"></a><a href="#" class="grid-item"><img src="imagenes/insta-sam-02.jpg" alt="Obra 2"></a><a href="#" class="grid-item"><img src="imagenes/insta-sam-03.jpg" alt="Obra 3"></a><a href="#" class="grid-item"><img src="imagenes/insta-sam-04.jpg" alt="Obra 4"></a></div></div>
                            </div>
                        </div>
                        <div class="slide">
                            <h3>Luis √Ångel Nava</h3>
                            <div class="about-layout">
                                <div class="about-column about-text">
                                    <p>Guionista y creativo enfocado en el desarrollo de historias para cine y otros medios. Su trabajo busca explorar narrativas introspectivas y personajes complejos. ¬°Mantente al tanto!</p>
                                    <div class="social-links-section">
                                        <a href="https://www.imdb.com/name/nm13304010/?ref_=ext_shr_lnk" target="_blank" class="social-icon-circle"><img src="imagenes/imdb.png" alt="IMDb"></a>
                                        <a href="https://www.instagram.com/angelnava_22/" target="_blank" class="social-icon-circle"><img src="imagenes/instagram-icon.png" alt="Instagram"></a>
                                        <a href="mailto:luis.nava.escritor@email.com" class="social-icon-circle"><img src="imagenes/Mail.png" alt="Email"></a>
                                    </div>
                                </div>
                                <div class="about-column about-media"><img src="https://placehold.co/600x400/4CAF50/FFFFFF?text=Luis+Nava" alt="Luis √Ångel Nava" class="profile-image"></div>
                            </div>
                        </div>
                    </div>
                    <div class="slider-nav"><span class="dot active" data-slide="0"></span><span class="dot" data-slide="1"></span><span class="dot" data-slide="2"></span></div>
                </div>
            </div>
        </section>

        <section id="la-fortuna" class="seccion-contenido">
            <div class="container dark-container">
                <h2 class="titulo-dorado">La Fortuna.</h2>
                <h3 class="fortuna-subtitle">Hay recuerdos que se escriben en papel de arroz.</h3>
                <div class="fortuna-main-content">
                    <div class="fortuna-columna-texto">
                        <p class="logline">EN LOS 80, UN JOVEN LAVATRASTES ESCRIB√çA A MANO GALLETAS DE LA FORTUNA, TODAS SECRETAMENTE DEDICADAS A AMARANTA ARAIZA. D√âCADAS DESPU√âS, YA ESCRITOR, REGRESA A SU PUEBLO PARA ENFRENTAR LA √öNICA FORTUNA QUE NUNCA SE ATREVI√ì A LEER.</p>
                        <div class="sinopsis-texto"><p>Luis Wilkens, un escritor consagrado, vuelve a Todos Santos, su pueblo natal en Baja California Sur, para inaugurar una biblioteca en su honor. Sin embargo, el verdadero motivo de su regreso es enfrentar los fantasmas de un amor adolescente que lo ha perseguido durante d√©cadas.</p></div>
                        <div class="datos-proyecto"><p><strong>G√âNERO:</strong> Drama / Romance</p><p><strong>DURACI√ìN ESTIMADA:</strong> 103 MIN.</p></div>
                        <div class="action-buttons-container">
                            <a href="https://drive.google.com/file/d/10mN6lgND34U-PyQ9So5VRUbhn9kAJHvF/view?usp=sharing" target="_blank" class="enlace-guion">üçÄ Leer Guion</a>
                            <button id="open-fortune-modal-btn" class="enlace-guion">‚ú® Pedir Otra Fortuna</button>
                        </div>
                    </div>
                    <div class="fortuna-columna-animacion">
                        <div class="galleta-container" id="galleta-anim-trigger">
                            <img src="imagenes/galleta-01.png" class="galleta-secuencia"><img src="imagenes/galleta-02.png" class="galleta-secuencia"><img src="imagenes/galleta-03.png" class="galleta-secuencia"><img src="imagenes/galleta-04.png" class="galleta-secuencia"><img src="imagenes/galleta-05.png" class="galleta-secuencia"><img src="imagenes/galleta-06.png" class="galleta-secuencia"><img src="imagenes/galleta-07.png" class="galleta-secuencia">
                            <div class="fortuna-papel">Aquel que carga la fortuna debe saber cuando leerla.</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

       <section id="dante-en-la-playa" class="seccion-contenido section-dante"
    style="background: url('imagenes/fondodante.jpg') center center / cover fixed no-repeat;">
    <div style="background-color: rgba(0, 0, 0, 0.6); padding: clamp(4rem, 10vw,¬†8rem)¬†0;">
            <div class="container">
                <div class="dante-grid-layout">
                    <div class="dante-columna dante-info">
                        <h2 class="titulo-dante">Dante <span class="subtitle-dante">en la playa del amor desenfrenado.</span></h2>
                        <p class="logline">UN HOMBRE DESPIERTA CON RESACA EN UNA PLAYA DE BAJA CALIFORNIA SUR, DESCUBRIENDO QUE EST√Å MUERTO Y ATRAPADO EN EL PURGATORIO. PARA ALCANZAR EL PARA√çSO, DEBE EMPRENDER UN VIAJE ESPIRITUAL A TRAV√âS DEL DESIERTO, GUIADO POR LAS MEMORIAS DE SU ABUELO Y LA ESPERANZA DE REENCONTRARSE CON SU AMADA BEATRIZ.</p>
                        <div class="datos-proyecto"><p><strong>G√âNERO:</strong> Fantas√≠a / Drama</p><p><strong>DURACI√ìN:</strong> 33 MIN.</p></div>
                    </div>
                    <div class="dante-columna dante-tarot">
                        <h3 class="tarot-subtitle">Una lectura para tu viaje.</h3>
                        <div class="tarot-interactive-area">
                            <img src="imagenes/mazo-tarot.png" alt="Mazo de Tarot" id="tarot-deck" class="tarot-deck-image">
                            <button id="draw-tarot-btn" class="enlace-guion">Sacar una carta</button>
                        </div>
                        <div id="tarot-result-grid" class="tarot-grid"></div>
                    </div>
                </div>
            </div>
        </section>

        <section id="poemas-apestosos" class="seccion-contenido seccion-poemas">
    <div class="container">
        <h2>Y UN PAR DE COCHINADAS M√ÅS.</h2>
        
        <!-- Contenedor donde se mostrar√° el poema actual -->
        <div id="poema-display" class="dark-container" style="margin-bottom: 2rem; min-height: 250px;">
            <h3 id="poema-titulo" class="titulo-dorado">Cargando poema...</h3>
            <p id="poema-texto" style="white-space: pre-wrap; margin-top: 1rem; margin-bottom: 1.5rem;"></p>
            <em id="poema-autor" style="display: block; text-align: right;"></em>
        </div>

        <!-- Controles de navegaci√≥n -->
        <div class="poemas-nav" style="text-align: center;">
            <button id="prev-poema" class="poemas-nav-btn">
                <img src="imagenes/caca.png" alt="Anterior" style="transform: scaleX(-1); width:50px;">
            </button>
            <button id="next-poema" class="poemas-nav-btn">
                <img src="imagenes/caca.png" alt="Siguiente" style="width:50px;">
            </button>
        </div>
    </div>
</section>
    </main>

    <footer class="site-footer">
        <div class="container">
            <div class="footer-line"></div>
            <!-- FIX: El enlace mailto ahora funciona correctamente -->
            <a href="mailto:josh.adriansolana2@gmail.com" class="footer-symbols">MAIL</a>
            <div class="footer-line"></div>
        </div>
    </footer>

    <!-- MODALES -->
    <div id="fortune-modal" class="modal-overlay"><div class="modal-content"><span class="modal-close" id="fortune-modal-close">&times;</span><h4>Recibe una nueva fortuna</h4><p>Deja tu correo o tu Instagram para continuar y recibir noticias sobre nuestros proyectos.</p><form id="subscribe-form"><input type="text" id="contact-input" placeholder="tu@correo.com o @tuinstagram" required><button type="submit" id="subscribe-and-generate-btn" class="enlace-guion">Obtener Fortuna</button></form><div id="form-message"></div></div></div>
    <div id="tarot-modal" class="modal-overlay"><div class="modal-content tarot-modal-content"><span class="modal-close tarot-modal-close">&times;</span><img id="tarot-modal-img" src="" alt="Carta de Tarot Ampliada"><h4 id="tarot-modal-title"></h4><p id="tarot-modal-text"></p></div></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            gsap.registerPlugin(ScrollTrigger);
            
            gsap.to(".sirena-img", { scrollTrigger: { trigger: ".hero-sirena", start: "top top", end: "bottom top", scrub: true }, scale: 1.2, ease: "none" });

            const slidesContainer = document.querySelector('.slides');
            const slideDots = document.querySelectorAll('.slider-nav .dot');
            if (slidesContainer && slideDots.length > 0) {
                slideDots.forEach(dot => {
                    dot.addEventListener('click', () => {
                        const slideIndex = parseInt(dot.getAttribute('data-slide'));
                        slidesContainer.style.transform = `translateX(-${slideIndex * (100 / 3)}%)`;
                        slideDots.forEach(d => d.classList.remove('active'));
                        dot.classList.add('active');
                    });
                });
            }

            const galletaTrigger = document.getElementById('galleta-anim-trigger');
            if (galletaTrigger) {
                const frames = galletaTrigger.querySelectorAll(".galleta-secuencia");
                const fortunaPapel = galletaTrigger.querySelector('.fortuna-papel');
                gsap.set(frames, { autoAlpha: 0 });
                gsap.set(frames[0], { autoAlpha: 1 });
                gsap.set(fortunaPapel, { autoAlpha: 0, scale: 0.8 });

                const tlCookie = gsap.timeline({
                    scrollTrigger: {
                        trigger: "#la-fortuna",
                        start: "top center",
                        onEnter: () => tlCookie.play(),
                        once: true
                    },
                    paused: true
                });

                const frameCount = frames.length;
                const step = 1 / frameCount;
                frames.forEach((frame, i) => {
                    if (i > 0) tlCookie.set(frames[i - 1], { autoAlpha: 0 }, i * step);
                    tlCookie.set(frames[i], { autoAlpha: 1 }, i * step);
                });
                tlCookie.to(fortunaPapel, { autoAlpha: 1, scale: 1, ease: 'back.out(1.7)' }, 1 - step);
            }
            
            const fortuneModal = document.getElementById('fortune-modal');
            const openFortuneModalBtn = document.getElementById('open-fortune-modal-btn');
            const closeFortuneModalBtn = document.getElementById('fortune-modal-close');
            const subscribeForm = document.getElementById('subscribe-form');
            
            if(openFortuneModalBtn) openFortuneModalBtn.addEventListener('click', () => fortuneModal.classList.add('visible'));
            if(closeFortuneModalBtn) closeFortuneModalBtn.addEventListener('click', () => fortuneModal.classList.remove('visible'));
            
            if(subscribeForm) {
                subscribeForm.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const contactInput = document.getElementById('contact-input');
                    const formMessage = document.getElementById('form-message');
                    const submitBtn = document.getElementById('subscribe-and-generate-btn');

                    submitBtn.disabled = true;
                    submitBtn.textContent = 'Guardando...';
                    formMessage.textContent = '';

                    try {
                        const subResponse = await fetch('/api/subscribe', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ contact: contactInput.value }),
                        });

                        if (!subResponse.ok) throw new Error('Error al registrar el contacto.');
                        
                        fortuneModal.classList.remove('visible');
                        await generateFortune();

                    } catch (error) {
                        formMessage.textContent = 'Hubo un error. Int√©ntalo de nuevo.';
                        console.error(error);
                    } finally {
                        submitBtn.disabled = false;
                        submitBtn.textContent = 'Obtener Fortuna';
                    }
                });
            }

            // El resto del JS sin cambios
            const tarotCardsData = [ { name: "El Viaje Desolado", image: "imagenes/tarot-1.png", interpretation: "El viaje inicia con abandono, dejando atr√°s lo que ya no sirve." }, { name: "La Soledad del Desierto", image: "imagenes/tarot-2.jpg", interpretation: "La soledad y aridez subrayan un aislamiento sin gu√≠a espiritual." }, { name: "La Ascensi√≥n", image: "imagenes/tarot-3.jpeg", interpretation: "Una revelaci√≥n forzosa que impulsa a emprender la redenci√≥n." }, { name: "El Para√≠so", image: "imagenes/tarot-4.jpg", interpretation: "La culminaci√≥n del viaje, un reencuentro que trae paz y gracia." } ];
            const drawTarotBtn = document.getElementById('draw-tarot-btn');
            const tarotResultGrid = document.getElementById('tarot-result-grid');
            const tarotModal = document.getElementById('tarot-modal');
            const tarotDeck = document.getElementById('tarot-deck');
            if(drawTarotBtn && tarotResultGrid && tarotModal && tarotDeck) { let drawnCards = 0; const drawCard = () => { if (drawnCards >= tarotCardsData.length) return; const cardData = tarotCardsData[drawnCards]; const cardElement = document.createElement('img'); cardElement.src = cardData.image; cardElement.alt = cardData.name; cardElement.className = 'tarot-card'; cardElement.addEventListener('click', () => { document.getElementById('tarot-modal-img').src = cardData.image; document.getElementById('tarot-modal-title').innerText = cardData.name; document.getElementById('tarot-modal-text').innerText = cardData.interpretation; tarotModal.classList.add('visible'); }); tarotResultGrid.appendChild(cardElement); gsap.from(cardElement, { opacity: 0, y: 50, duration: 0.5 }); drawnCards++; if (drawnCards >= tarotCardsData.length) { drawTarotBtn.innerText = 'Lectura Completa'; drawTarotBtn.disabled = true; gsap.to([drawTarotBtn, tarotDeck], {autoAlpha: 0.5, duration: 0.5}); } }; drawTarotBtn.addEventListener('click', drawCard); tarotDeck.addEventListener('click', drawCard); const tarotModalClose = tarotModal.querySelector('.tarot-modal-close'); if(tarotModalClose) tarotModalClose.addEventListener('click', () => tarotModal.classList.remove('visible')); }
            const poemasContainer = document.getElementById('poemas-explicacion-container');
            const poemasNextBtn = document.getElementById('poemas-next-btn');
            const manuscritoBtn = document.getElementById('leer-manuscrito-btn');
            if (poemasContainer && poemasNextBtn && manuscritoBtn) { const textosPoemas = [ `<h4>¬øQu√© es un poema apestoso?</h4><p>Un poema apestoso es un poema que no teme ensuciarse, que juega con lo grotesco, lo absurdo y lo cotidiano. Son versos que huelen a infancia, a travesura y a libertad creativa.</p>`, `<h4>¬øPor qu√© un poema apestoso?</h4><p>Porque la poes√≠a tambi√©n puede re√≠rse de s√≠ misma, romper las reglas y celebrar lo imperfecto. Un poema apestoso es una invitaci√≥n a escribir sin miedo al rid√≠culo, a encontrar belleza en lo inesperado.</p>` ]; let currentPoemaIndex = 0; manuscritoBtn.style.display = 'none'; function showPoemaSlide(index) { const slideHTML = textosPoemas[index]; gsap.to(poemasContainer, { autoAlpha: 0, duration: 0.3, onComplete: () => { poemasContainer.innerHTML = slideHTML; gsap.to(poemasContainer, { autoAlpha: 1, duration: 0.3 }); } }); const isLastSlide = index === textosPoemas.length - 1; gsap.to(poemasNextBtn, { autoAlpha: isLastSlide ? 0 : 1, duration: 0.3, pointerEvents: isLastSlide ? 'none' : 'auto' }); gsap.to(manuscritoBtn, { autoAlpha: isLastSlide ? 1 : 0, display: isLastSlide ? 'inline-block' : 'none', duration: 0.3 }); } poemasNextBtn.addEventListener('click', () => { currentPoemaIndex = (currentPoemaIndex + 1) % textosPoemas.length; showPoemaSlide(currentPoemaIndex); }); showPoemaSlide(0); }
        });

        async function generateFortune() { const fortunePaper = document.querySelector('.fortuna-papel'); const openFortuneBtn = document.getElementById('open-fortune-modal-btn'); openFortuneBtn.disabled = true; fortunePaper.innerText = 'Generando...'; try { const response = await fetch('/api/generate-fortune', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ prompt: `Eres un escritor de galletas de la fortuna para un guion de cine. Genera una fortuna po√©tica, misteriosa y ligeramente melanc√≥lica en una sola oraci√≥n concisa en espa√±ol. No incluyas comillas.` }), }); if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`); const data = await response.json(); gsap.to(fortunePaper, { opacity: 0, duration: 0.3, onComplete: () => { fortunePaper.innerText = data.fortune; gsap.to(fortunePaper, { opacity: 1, duration: 0.5, ease: "power2.out" }); } }); } catch (error) { console.error('Error al generar la fortuna:', error); fortunePaper.innerText = "El destino est√° nublado hoy."; gsap.to(fortunePaper, { opacity: 1, duration: 0.5 }); } finally { openFortuneBtn.disabled = false; } }
         
        // --- L√ìGICA PARA POEMAS APESTOSOS ---
        
        // Guardaremos los poemas aqu√≠ cuando los recibamos del servidor.
        let todosLosPoemas = [];
        let poemaActualIndex = 0;

        // Elementos del HTML que vamos a manipular.
        const poemaTituloEl = document.getElementById('poema-titulo');
        const poemaTextoEl = document.getElementById('poema-texto');
        const poemaAutorEl = document.getElementById('poema-autor');
        const prevPoemaBtn = document.getElementById('prev-poema');
        const nextPoemaBtn = document.getElementById('next-poema');

        // Funci√≥n para mostrar un poema espec√≠fico seg√∫n su posici√≥n en la lista (index).
        function mostrarPoema(index) {
            if (todosLosPoemas.length === 0) return; // No hacer nada si no hay poemas.

            const poema = todosLosPoemas[index];
            poemaTituloEl.textContent = poema.titulo;
            poemaTextoEl.textContent = poema.poema;
            poemaAutorEl.textContent = `- ${poema.autor}`;
        }

        // Pedimos los poemas al servidor en cuanto la p√°gina cargue.
        fetch('/poemas')
            .then(response => response.json())
            .then(data => {
                todosLosPoemas = data; // Guardamos la lista de poemas.
                mostrarPoema(0); // Mostramos el primer poema.
            })
            .catch(error => {
                console.error('Error al cargar los poemas:', error);
                poemaTituloEl.textContent = "No pudimos cargar los poemas.";
                poemaTextoEl.textContent = "Intenta refrescar la p√°gina.";
            });

        // Evento para el bot√≥n "siguiente".
        nextPoemaBtn.addEventListener('click', () => {
            // Aumentamos el √≠ndice, y si llegamos al final, volvemos al principio.
            poemaActualIndex = (poemaActualIndex + 1) % todosLosPoemas.length;
            mostrarPoema(poemaActualIndex);
        });

        // Evento para el bot√≥n "anterior".
        prevPoemaBtn.addEventListener('click', () => {
            // Disminuimos el √≠ndice. Si estamos en el primero, vamos al √∫ltimo.
            poemaActualIndex = (poemaActualIndex - 1 + todosLosPoemas.length) % todosLosPoemas.length;
            mostrarPoema(poemaActualIndex);
        });
    </script>
</body>
</html>


