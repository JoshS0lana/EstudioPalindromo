<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estudio Pal√≠ndromo - Inicio</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat&family=Cinzel+Decorative:wght@700&family=MedievalSharp&family=Gaegu:wght@400;700&family=Cormorant+Garamond:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header id="page-header">
        <div class="container header-container">
            <nav class="header-menu-lado">
                <a href="#la-fortuna" class="menu-circulo"><img src="imagenes/icono-fortuna.png" alt="La Fortuna"></a>
                <a href="#dante-en-la-playa" class="menu-circulo"><img src="imagenes/icono-dante.png" alt="Dante en la Playa"></a>
            </nav>
            <a href="#" class="header-titulo">Estudio Pal√≠ndromo</a>
            <nav class="header-menu-lado">
                <a href="#poemas-apestosos" class="menu-circulo"><img src="imagenes/icono-poemas.png" alt="Poemas Apestosos"></a>
            </nav>
        </div>
    </header>
    
    <main>
        <section class="hero-sirena">
            <div class="hero-background">
                 <img src="imagenes/sirena-portada.jpg" alt="Logo de Estudio Pal√≠ndromo: Sirena con c√°mara cinematogr√°fica" class="sirena-img">
            </div>
            <h1 class="titulo-hero">Estudio Pal√≠ndromo</h1>
        </section>

        <section id="sobre-nosotros" class="seccion-contenido">
            <div class="container dark-container">
                <h2>Sobre Nosotros</h2>
                <div class="slider-container">
                    <div class="slides">
                        <div class="slide">
                            <h3>Joshua Solana</h3>
                            <div class="about-layout">
                                <div class="about-column about-text">
                                    <p>Soy un productor creativo, escritor cultural y educador audiovisual con experiencia en proyectos interdisciplinarios. He trabajado tanto en espacios educativos como en medios culturales, y me interesa colaborar con equipos que valoren la imaginaci√≥n, la escritura y el pensamiento visual.</p>
                                    <div class="social-links-section">
                                        <a href="https://www.linkedin.com/in/joshs0lana/" target="_blank" class="social-icon-circle"><img src="imagenes/linkedin-icon.png" alt="LinkedIn"></a>
                                        <a href="https://www.imdb.com/name/nm13304009/?ref_=ext_shr_lnk" target="_blank" class="social-icon-circle"><img src="imagenes/imdb.png" alt="IMDb"></a>
                                        <a href="https://www.instagram.com/joshsolana_/" target="_blank" class="social-icon-circle"><img src="imagenes/instagram-icon.png" alt="Instagram"></a>
                                        <a href="mailto:josh.adriansolana2@gmail.com" class="social-icon-circle"><img src="imagenes/Mail.png" alt="Email"></a>
                                    </div>
                                </div>
                                <div class="about-column about-media"><div class="vimeo-container"><iframe src="https://player.vimeo.com/video/1052665636?h=06da0ad355&title=0&byline=0&portrait=0" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe></div></div>
                            </div>
                        </div>
                        <div class="slide">
                            <h3>Samantha Solana</h3>
                            <div class="about-layout">
                                <div class="about-column about-text">
                                    <p>Artista visual con un profundo inter√©s en el dibujo, la cer√°mica y el grabado. Para m√≠, el arte es una experiencia vital que me permite explorar el mundo, formar mi cosmovisi√≥n y entender mi propia identidad. Mi obra busca conectar con el car√°cter antropol√≥gico y la magia de la vida.</p>
                                    <div class="social-links-section">
                                        <a href="#" target="_blank" class="enlace-guion small-button">Ver Galer√≠a</a>
                                        <a href="https://www.instagram.com/samantha_solana" target="_blank" class="social-icon-circle"><img src="imagenes/instagram-icon.png" alt="Instagram"></a>
                                        <a href="mailto:samantha.solana.art@email.com" class="social-icon-circle"><img src="imagenes/Mail.png" alt="Email"></a>
                                    </div>
                                </div>
                                <div class="about-column about-media"><div class="instagram-grid"><a href="#" class="grid-item"><img src="imagenes/insta-sam-01.jpg" alt="Obra 1"></a><a href="#" class="grid-item"><img src="imagenes/insta-sam-02.jpg" alt="Obra 2"></a><a href="#" class="grid-item"><img src="imagenes/insta-sam-03.jpg" alt="Obra 3"></a><a href="#" class="grid-item"><img src="imagenes/insta-sam-04.jpg" alt="Obra 4"></a></div></div>
                            </div>
                        </div>
                        <div class="slide">
                            <h3>Luis √Ångel Nava</h3>
                            <div class="about-layout">
                                <div class="about-column about-text">
                                    <p>Guionista y creativo enfocado en el desarrollo de historias para cine y otros medios. Su trabajo busca explorar narrativas introspectivas y personajes complejos. ¬°Mantente al tanto!</p>
                                    <div class="social-links-section">
                                        <a href="https://www.imdb.com/name/nm13304010/?ref_=ext_shr_lnk" target="_blank" class="social-icon-circle"><img src="imagenes/imdb.png" alt="IMDb"></a>
                                        <a href="https://www.instagram.com/angelnava_22/" target="_blank" class="social-icon-circle"><img src="imagenes/instagram-icon.png" alt="Instagram"></a>
                                        <a href="mailto:luis.nava.escritor@email.com" class="social-icon-circle"><img src="imagenes/Mail.png" alt="Email"></a>
                                    </div>
                                </div>
                                <div class="about-column about-media"><img src="https://placehold.co/600x400/4CAF50/FFFFFF?text=Luis+Nava" alt="Luis √Ångel Nava" class="profile-image"></div>
                            </div>
                        </div>
                    </div>
                    <div class="slider-nav"><span class="dot active" data-slide="0"></span><span class="dot" data-slide="1"></span><span class="dot" data-slide="2"></span></div>
                </div>
            </div>
        </section>

        <section id="la-fortuna" class="seccion-contenido">
            <div class="container dark-container">
                <h2 class="titulo-dorado">La Fortuna.</h2>
                <h3 class="fortuna-subtitle">Hay recuerdos que se escriben en papel de arroz.</h3>
                <div class="fortuna-main-content">
                    <div class="fortuna-columna-texto">
                        <p class="logline">EN LOS 80, UN JOVEN LAVATRASTES ESCRIB√çA A MANO GALLETAS DE LA FORTUNA, TODAS SECRETAMENTE DEDICADAS A AMARANTA ARAIZA. D√âCADAS DESPU√âS, YA ESCRITOR, REGRESA A SU PUEBLO PARA ENFRENTAR LA √öNICA FORTUNA QUE NUNCA SE ATREVI√ì A LEER.</p>
                        <div class="sinopsis-texto"><p>Luis Wilkens, un escritor consagrado, vuelve a Todos Santos, su pueblo natal en Baja California Sur, para inaugurar una biblioteca en su honor. Sin embargo, el verdadero motivo de su regreso es enfrentar los fantasmas de un amor adolescente que lo ha perseguido durante d√©cadas.</p></div>
                        <div class="datos-proyecto"><p><strong>G√âNERO:</strong> Drama / Romance</p><p><strong>DURACI√ìN ESTIMADA:</strong> 103 MIN.</p></div>
                        <div class="action-buttons-container">
                            <a href="https://drive.google.com/file/d/10mN6lgND34U-PyQ9So5VRUbhn9kAJHvF/view?usp=sharing" target="_blank" class="enlace-guion">üçÄ Leer Guion</a>
                            <button id="open-fortune-modal-btn" class="enlace-guion">‚ú® Pedir Otra Fortuna</button>
                        </div>
                    </div>
                    <div class="fortuna-columna-animacion">
                        <div class="galleta-container" id="galleta-anim-trigger">
                            <img src="imagenes/galleta-01.png" class="galleta-secuencia"><img src="imagenes/galleta-02.png" class="galleta-secuencia"><img src="imagenes/galleta-03.png" class="galleta-secuencia"><img src="imagenes/galleta-04.png" class="galleta-secuencia"><img src="imagenes/galleta-05.png" class="galleta-secuencia"><img src="imagenes/galleta-06.png" class="galleta-secuencia"><img src="imagenes/galleta-07.png" class="galleta-secuencia">
                            <div class="fortuna-papel">Aquel que carga la fortuna debe saber cuando leerla.</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

       <section id="dante-en-la-playa" class="seccion-contenido">
    <div class="container dante-grid-layout">
        <div class="dante-columna-texto">
            <h2 class="titulo-dante">
                Dante
                <span class="subtitle-dante">en la playa del amor desenfrenado.</span>
            </h2>
            <p class="logline">
                UN HOMBRE DESPIERTA CON RESACA EN UNA PLAYA DE BAJA CALIFORNIA SUR, DESCUBRIENDO QUE EST√Å MUERTO Y ATRAPADO EN EL PURGATORIO. PARA ALCANZAR EL PARA√çSO, DEBE EMPRENDER UN VIAJE ESPIRITUAL A TRAV√âS DEL DESIERTO, GUIADO POR LAS MEMORIAS DE SU ABUELO Y LA ESPERANZA DE REENCONTRARSE CON SU AMADA BEATRIZ.
            </p>
            <p><strong>G√âNERO:</strong> Fantas√≠a / Drama<br><strong>DURACI√ìN:</strong> 33 Min.</p>
        </div>
        <div class="tarot-interactive-area">
            <!-- El mazo se ha ido, las cartas aparecer√°n aqu√≠ abajo -->
            <div id="tarot-result-grid">
                <!-- Las cartas del tarot se insertar√°n aqu√≠ con JavaScript -->
            </div>
             <p id="tarot-instruction" style="margin-top: 1rem; font-style: italic; opacity: 0.7;">Baja para revelar tu lectura...</p>
        </div>
    </div>
</section>

        <section id="poemas-apestosos" class="seccion-contenido seccion-poemas">
    <div class="container">
        
        <!-- Contenedor del carrusel de poemas -->
        <div id="poema-display" class="dark-container" style="margin-bottom: 1rem;">
            <h3 id="poema-titulo" class="titulo-dorado">Cargando poema...</h3>
            <p id="poema-texto" style="white-space: pre-wrap; margin-top: 1rem; margin-bottom: 1.5rem; min-height: 150px;"></p>
            <em id="poema-autor" style="display: block; text-align: right;"></em>
        </div>

        <!-- Controles de navegaci√≥n de poemas -->
        <div class="poemas-nav" style="text-align: center; margin-bottom: 2.5rem;">
            <button id="prev-poema" class="poemas-nav-btn">
                <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="stroke: #fff;"><polyline points="15 18 9 12 15 6"></polyline></svg>
            </button>
            <button id="next-poema" class="poemas-nav-btn">
               <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="stroke: #fff;"><polyline points="9 18 15 12 9 6"></polyline></svg>
            </button>
        </div>

        <!-- Bot√≥n para mostrar el manuscrito -->
        <div style="text-align: center; margin-bottom: 2rem;">
            <a href="#" id="leer-manuscrito-btn" class="enlace-guion">Leer Manuscrito</a>
        </div>

        <!-- Contenedor del manuscrito (inicialmente oculto) -->
        <div id="manuscrito-container" class="dark-container" style="display: none;">
            <div id="manuscrito-que-es" style="margin-bottom: 1.5rem;">
                <h4 class="titulo-dorado"></h4>
                <p></p>
            </div>
            <div id="manuscrito-por-que">
                <h4 class="titulo-dorado"></h4>
                <p></p>
            </div>
        </div>
    </div>
</section>

</section>
    </main>

    <footer class="site-footer">
        <div class="container">
            <div class="footer-line"></div>
            <!-- FIX: El enlace mailto ahora funciona correctamente -->
            <a href="mailto:josh.adriansolana2@gmail.com" class="footer-symbols">MAIL</a>
            <div class="footer-line"></div>
        </div>
    </footer>

    <!-- MODALES -->
    <div id="fortune-modal" class="modal-overlay"><div class="modal-content"><span class="modal-close" id="fortune-modal-close">&times;</span><h4>Recibe una nueva fortuna</h4><p>Deja tu correo o tu Instagram para continuar y recibir noticias sobre nuestros proyectos.</p><form id="subscribe-form"><input type="text" id="contact-input" placeholder="tu@correo.com o @tuinstagram" required><button type="submit" id="subscribe-and-generate-btn" class="enlace-guion">Obtener Fortuna</button></form><div id="form-message"></div></div></div>
    <div id="tarot-modal" class="modal-overlay"><div class="modal-content tarot-modal-content"><span class="modal-close tarot-modal-close">&times;</span><img id="tarot-modal-img" src="" alt="Carta de Tarot Ampliada"><h4 id="tarot-modal-title"></h4><p id="tarot-modal-text"></p></div></div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
    // --- L√ìGICA PARA EL SLIDER DE "SOBRE NOSOTROS" ---
    const slides = document.querySelector('.slides');
    const dots = document.querySelectorAll('.dot');
    let currentIndex = 0;

    function updateSlider() {
        slides.style.transform = `translateX(-${currentIndex * 100 / 3}%)`;
        dots.forEach((dot, index) => {
            dot.classList.toggle('active', index === currentIndex);
        });
    }

    dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
            currentIndex = index;
            updateSlider();
        });
    });

    // --- L√ìGICA PARA LA GALLETA DE LA FORTUNA ---
    const generarFortunaBtn = document.getElementById('generar-fortuna-btn');
    const galletaImg = document.getElementById('galleta-secuencia-img');
    const fortunaPapel = document.getElementById('fortuna-papel-texto');
    const modal = document.getElementById('contact-modal');
    const closeModalBtn = document.querySelector('.modal-close');
    
    let fortunaGratisConcedida = false; // <-- NUEVA BANDERA
    let animacionEnCurso = false;

    function obtenerNuevaFortuna() {
        if (animacionEnCurso) return;
        animacionEnCurso = true;

        let frame = 1;
        const totalFrames = 8;
        galletaImg.src = `imagenes/galleta-01.png`;
        fortunaPapel.parentElement.style.display = 'none';

        const interval = setInterval(() => {
            frame++;
            if (frame <= totalFrames) {
                galletaImg.src = `imagenes/galleta-0${frame}.png`;
            } else {
                clearInterval(interval);
                fetch('/fortuna')
                    .then(response => response.json())
                    .then(data => {
                        fortunaPapel.textContent = data.fortuna;
                        fortunaPapel.parentElement.style.display = 'block';
                        animacionEnCurso = false;
                    }).catch(() => animacionEnCurso = false);
            }
        }, 100);
    }

    generarFortunaBtn.addEventListener('click', (e) => {
        e.preventDefault();
        if (!fortunaGratisConcedida) {
            obtenerNuevaFortuna();
            fortunaGratisConcedida = true; // Marcamos que la fortuna gratis ya se dio.
        } else {
            modal.classList.add('visible'); // A partir de la segunda vez, mostramos el modal.
        }
    });

    closeModalBtn.addEventListener('click', () => modal.classList.remove('visible'));
    modal.addEventListener('click', (e) => {
        if (e.target === modal) {
            modal.classList.remove('visible');
        }
    });

    // --- L√ìGICA PARA EL TAROT DE DANTE (CON SCROLL) ---
    const tarotResultGrid = document.getElementById('tarot-result-grid');
    const danteSection = document.getElementById('dante-en-la-playa');
    let tarotYaRevelado = false; // Para asegurar que se active una sola vez.

    function getTarotReading() {
        if (tarotYaRevelado) return; // Si ya se carg√≥, no hacer nada.
        tarotYaRevelado = true;

        fetch('/tarot')
            .then(response => response.json())
            .then(cartas => {
                tarotResultGrid.innerHTML = ''; // Limpiar por si acaso
                document.getElementById('tarot-instruction').style.display = 'none'; // Ocultar instrucci√≥n
                
                cartas.forEach((carta, index) => {
                    const cardElement = document.createElement('img');
                    cardElement.src = carta.imagenUrl;
                    cardElement.alt = carta.nombre;
                    cardElement.title = `${carta.nombre}: ${carta.significado}`;
                    cardElement.classList.add('tarot-card');
                    cardElement.style.opacity = '0';
                    cardElement.style.transform = 'translateY(20px)';
                    cardElement.style.transition = `opacity 0.5s ease ${index * 0.3}s, transform 0.5s ease ${index * 0.3}s`;
                    tarotResultGrid.appendChild(cardElement);

                    // Forzar el repintado del navegador y luego aplicar la transici√≥n
                    setTimeout(() => {
                        cardElement.style.opacity = '1';
                        cardElement.style.transform = 'translateY(0)';
                    }, 50);
                });
            })
            .catch(error => console.error('Error al obtener la lectura del tarot:', error));
    }

    // Creamos el "sensor" (Intersection Observer)
    const tarotObserver = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            // Si la secci√≥n de Dante es visible en la pantalla...
            if (entry.isIntersecting) {
                getTarotReading(); // ...obtenemos la lectura.
                observer.unobserve(entry.target); // Y apagamos el sensor para que no se repita.
            }
        });
    }, { threshold: 0.4 }); // Se activa cuando el 40% de la secci√≥n es visible

    // Le decimos al sensor que vigile la secci√≥n de Dante.
    tarotObserver.observe(danteSection);


    // --- L√ìGICA PARA POEMAS APESTOSOS ---
    let todosLosPoemas = [];
    let poemaActualIndex = 0;
    const poemaTituloEl = document.getElementById('poema-titulo');
    const poemaTextoEl = document.getElementById('poema-texto');
    const poemaAutorEl = document.getElementById('poema-autor');
    const prevPoemaBtn = document.getElementById('prev-poema');
    const nextPoemaBtn = document.getElementById('next-poema');
    const leerManuscritoBtn = document.getElementById('leer-manuscrito-btn');
    const manuscritoContainer = document.getElementById('manuscrito-container');

    function mostrarPoema(index) {
        if (!todosLosPoemas || todosLosPoemas.length === 0) return;
        const poema = todosLosPoemas[index];
        poemaTituloEl.textContent = poema.titulo;
        poemaTextoEl.textContent = poema.poema;
        poemaAutorEl.textContent = `- ${poema.autor}`;
    }

    fetch('/poemas')
        .then(response => response.json())
        .then(data => {
            todosLosPoemas = data.poemas;
            mostrarPoema(0);
            const queEsEl = document.querySelector('#manuscrito-que-es');
            queEsEl.querySelector('h4').textContent = data.manuscrito.queEs.titulo;
            queEsEl.querySelector('p').textContent = data.manuscrito.queEs.texto;
            const porQueEl = document.querySelector('#manuscrito-por-que');
            porQueEl.querySelector('h4').textContent = data.manuscrito.porQue.titulo;
            porQueEl.querySelector('p').textContent = data.manuscrito.porQue.texto;
        })
        .catch(error => {
            console.error('Error al cargar la secci√≥n de poemas:', error);
        });

    nextPoemaBtn.addEventListener('click', () => {
        poemaActualIndex = (poemaActualIndex + 1) % todosLosPoemas.length;
        mostrarPoema(poemaActualIndex);
    });
    prevPoemaBtn.addEventListener('click', () => {
        poemaActualIndex = (poemaActualIndex - 1 + todosLosPoemas.length) % todosLosPoemas.length;
        mostrarPoema(poemaActualIndex);
    });
    leerManuscritoBtn.addEventListener('click', (e) => {
        e.preventDefault();
        const isHidden = manuscritoContainer.style.display === 'none';
        manuscritoContainer.style.display = isHidden ? 'block' : 'none';
        leerManuscritoBtn.textContent = isHidden ? 'Ocultar Manuscrito' : 'Leer Manuscrito';
    });
});

    </script>
</body>
</html>





