<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estudio Pal√≠ndromo - Inicio</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat&family=Cinzel+Decorative:wght@700&family=MedievalSharp&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="style.css">
</head>
<body>

    <header id="page-header">
        <nav class="header-menu-lado">
            <a href="#la-fortuna" class="menu-circulo" id="circulo-fortuna"><img src="imagenes/icono-fortuna.png" alt="La Fortuna"></a>
            <a href="#dante-en-la-playa" class="menu-circulo" id="circulo-dante"><img src="imagenes/icono-dante.png" alt="Dante en la Playa"></a>
        </nav>
        <a href="#" class="header-titulo">Estudio Pal√≠ndromo</a>
        <nav class="header-menu-lado">
            <a href="#poemas-apestosos" class="menu-circulo" id="circulo-poemas"><img src="imagenes/icono-poemas.png" alt="Poemas Apestosos"></a>
        </nav>
    </header>
    
    <main>
        <section class="hero-sirena">
            <img src="imagenes/sirena-portada.jpg" alt="Logo de Estudio Pal√≠ndromo: Sirena con c√°mara cinematogr√°fica" class="sirena-img">
            <h1 class="titulo-hero">Estudio Pal√≠ndromo</h1>
        </section>

        <section id="sobre-nosotros" class="seccion-contenido">
            <h2>Sobre Nosotros</h2>
            <div class="slider-container">
                <div class="slides">
                    <div class="slide active">
                        <h3>Joshua Solana</h3>
                        <div class="about-layout">
                            <div class="about-column about-text">
                                <p>
                                    Soy un productor creativo, escritor cultural y educador audiovisual con experiencia en proyectos interdisciplinarios. He trabajado tanto en espacios educativos como en medios culturales, y me interesa colaborar con equipos que valoren la imaginaci√≥n, la escritura y el pensamiento visual.
                                </p>
                                <p>
                                    Colaboro con <a href="https://arbolrojocine.com" target="_blank">√Årbol Rojo A.C.</a>, cubriendo festivales como el FICG y Los Cabos IFF a trav√©s de cr√≥nicas y contenidos para redes. Tambi√©n fui docente en el Instituto Miguel √Ångel Herrera, donde impart√≠ cine, historia y escritura, y lidero proyectos como <a href="#poemas-apestosos" class="link-poemas-apestosos">Poemas Apestosos</a>.
                                </p>
                                <div class="social-links-section">
                                    <a href="https://www.linkedin.com/in/joshs0lana/" target="_blank" class="social-icon-circle">
                                        <img src="imagenes/linkedin-icon.png" alt="LinkedIn">
                                    </a>
                                    <a href="https://www.imdb.com/name/nm13304009/?ref_=ext_shr_lnk" target="_blank" class="social-icon-circle">
                                        <img src="imagenes/imdb.png" alt="IMDb">
                                    </a>
                                    <a href="https://www.instagram.com/joshsolana_/" target="_blank" class="social-icon-circle">
                                        <img src="imagenes/instagram-icon.png" alt="Instagram">
                                    </a>
                                     <a href="mailto:josh.adriansolana2@gmail.com" target="_blank" class="social-icon-circle">
                                        <img src="imagenes/Mail.png" alt="Email">
                                    </a>
                                </div>
                            </div>
                            <div class="about-column about-media">
                                <div class="vimeo-container">
                                    <iframe id="vimeo-main-player" src="https://player.vimeo.com/video/1052665636?h=06da0ad355&title=0&byline=0&portrait=0" frameborder="0" allow="autoplay; fullscreen; picture-in-picture" allowfullscreen></iframe>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide">
                        <h3>Samantha Solana</h3>
                        <div class="about-layout">
                             <div class="about-column about-text">
                                <p>
                                    Artista visual con un profundo inter√©s en el dibujo, la cer√°mica y el grabado. Para m√≠, el arte es una experiencia vital que me permite explorar el mundo, formar mi cosmovisi√≥n y entender mi propia identidad. Mi obra busca conectar con el car√°cter antropol√≥gico y la magia de la vida.
                                </p>
                                <p>
                                    Con estudios en Cine y Animaci√≥n, he trabajado en departamentos de arte para producciones audiovisuales, como animadora en la pel√≠cula "Monstruosamente Solo" y como ilustradora. Actualmente, curso la Licenciatura en Artes Visuales y co-imparto talleres de artes pl√°sticas.
                                </p>
                                <div class="social-links-section">
                                    <a href="#" target="_blank" class="enlace-guion small-button">Ver Galer√≠a</a>
                                    <a href="https://www.instagram.com/samantha_solana" target="_blank" class="social-icon-circle">
                                        <img src="imagenes/instagram-icon.png" alt="Instagram">
                                    </a>
                                     <a href="mailto:samantha.solana.art@email.com" target="_blank" class="social-icon-circle">
                                        <img src="imagenes/Mail.png" alt="Email">
                                    </a>
                                </div>
                            </div>
                            <div class="about-column about-media">
                                <div class="instagram-grid">
                                    <a href="https://www.instagram.com/p/C0q5L1buEaF/" target="_blank" class="grid-item"><img src="imagenes/insta-sam-01.jpg" alt="Publicaci√≥n de Instagram 1"></a>
                                    <a href="https://www.instagram.com/p/C0f9ZJEOc_C/" target="_blank" class="grid-item"><img src="imagenes/insta-sam-02.jpg" alt="Publicaci√≥n de Instagram 2"></a>
                                    <a href="https://www.instagram.com/p/C0f9NJ0uGjS/" target="_blank" class="grid-item"><img src="imagenes/insta-sam-03.jpg" alt="Publicaci√≥n de Instagram 3"></a>
                                    <a href="https://www.instagram.com/p/C0q5XFkOM4h/" target="_blank" class="grid-item"><img src="imagenes/insta-sam-04.jpg" alt="Publicaci√≥n de Instagram 4"></a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="slide">
                        <h3>Luis √Ångel Nava</h3>
                        <div class="about-layout">
                            <div class="about-column about-text">
                                <p>Guionista y creativo enfocado en el desarrollo de historias para cine y otros medios. Su trabajo busca explorar narrativas introspectivas y personajes complejos.</p>
                                <p>Actualmente tiene varios proyectos en desarrollo que pronto ver√°n la luz. ¬°Mantente al tanto!</p>
                                 <div class="social-links-section">
                                    <a href="https://www.imdb.com/name/nm13304010/?ref_=ext_shr_lnk" target="_blank" class="social-icon-circle">
                                       <img src="imagenes/imdb.png" alt="IMDb">
                                    </a>
                                    <a href="https://www.instagram.com/angelnava_22/" target="_blank" class="social-icon-circle">
                                        <img src="imagenes/instagram-icon.png" alt="Instagram">
                                    </a>
                                    <a href="mailto:luis.nava.escritor@email.com" target="_blank" class="social-icon-circle">
                                        <img src="imagenes/Mail.png" alt="Email">
                                    </a>
                                 </div>
                            </div>
                            <div class="about-column about-media">
                                <img src="https://placehold.co/600x400/4CAF50/FFFFFF?text=Luis+Nava" alt="Luis √Ångel Nava" class="profile-image">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="slider-nav">
                    <span class="dot active" data-slide="0"></span>
                    <span class="dot" data-slide="1"></span>
                    <span class="dot" data-slide="2"></span>
                </div>
            </div>
        </section>

        <section id="la-fortuna" class="seccion-contenido">
            <h2 class="titulo-dorado">La Fortuna.</h2>
            <h3 class="fortuna-subtitle">Hay recuerdos que se escriben en papel de arroz.</h3>
            
            <div id="fortuna-background-slideshow"></div>

            <div class="fortuna-main-content">
                <div class="fortuna-columna-texto">
                    <p class="logline">
                        EN LOS 80, UN JOVEN LAVATRASTES ESCRIB√çA A MANO GALLETAS DE LA FORTUNA, TODAS SECRETAMENTE DEDICADAS A AMARANTA ARAIZA. D√âCADAS DESPU√âS, YA ESCRITOR, REGRESA A SU PUEBLO PARA ENFRENTAR LA √öNICA FORTUNA QUE NUNCA SE ATREVI√ì A LEER.
                    </p>
                    <div class="sinopsis-texto">
                        <p>
                            Luis Wilkens, un escritor consagrado, vuelve a Todos Santos, su pueblo natal en Baja California Sur, para inaugurar una biblioteca en su honor. Un encuentro con su pasado lo sumerge en un viaje √≠ntimo al verano de 1973, cuando, con quince a√±os, escrib√≠a fortunas en un restaurante chino y viv√≠a su primer amor con Amaranta Araiza.
                        </p>
                    </div>
                    <div class="datos-proyecto">
                        <p><strong>G√âNERO:</strong> Drama / Romance</p>
                        <p><strong>DURACI√ìN ESTIMADA:</strong> 103 MIN.</p>
                    </div>
                     <div class="action-buttons-container">
                        <a href="https://drive.google.com/file/d/10mN6lgND34U-PyQ9So5VRUbhn9kAJHvF/view?usp=sharing" target="_blank" class="enlace-guion">üçÄ Leer Guion</a>
                        <button id="generate-fortune-btn" class="enlace-guion">‚ú® Pedir Otra Fortuna</button>
                    </div>
                </div>
                <div class="fortuna-columna-animacion">
                    <div class="galleta-container" id="galleta-anim-trigger">
                        <img src="imagenes/galleta-01.png" alt="Galleta paso 1" class="galleta-secuencia">
                        <img src="imagenes/galleta-02.png" alt="Galleta paso 2" class="galleta-secuencia">
                        <img src="imagenes/galleta-03.png" alt="Galleta paso 3" class="galleta-secuencia">
                        <img src="imagenes/galleta-04.png" alt="Galleta paso 4" class="galleta-secuencia">
                        <img src="imagenes/galleta-05.png" alt="Galleta paso 5" class="galleta-secuencia">
                        <img src="imagenes/galleta-06.png" alt="Galleta paso 6" class="galleta-secuencia">
                        <img src="imagenes/galleta-07.png" alt="Galleta paso 7" class="galleta-secuencia">
                        <div class="fortuna-papel">Aquel que carga la fortuna debe saber cuando leerla.</div>
                    </div>
                </div>
            </div>
        </section>

        <section id="dante-en-la-playa" class="seccion-contenido">
            <div class="dante-split-layout">
                <div class="dante-info">
                    <h2 class="titulo-dante">Dante <span class="subtitle-dante">en la playa del amor desenfrenado.</span></h2>
                    <p class="logline">
                        UN HOMBRE DESPIERTA CON RESACA EN UNA PLAYA DE BAJA CALIFORNIA SUR, DESCUBRIENDO QUE EST√Å MUERTO Y ATRAPADO EN EL PURGATORIO. PARA ALCANZAR EL PARA√çSO, DEBE EMPRENDER UN VIAJE ESPIRITUAL A TRAV√âS DEL DESIERTO, GUIADO POR LAS MEMORIAS DE SU ABUELO Y LA ESPERANZA DE REENCONTRARSE CON SU AMADA BEATRIZ.
                    </p>
                    <div class="sinopsis-texto">
                        <p>
                            "Dante en la playa del amor desenfrenado" es una reinterpretaci√≥n de "La Divina Comedia" ambientada en el paisaje m√≠stico de Baja California Sur. La historia sigue a Dante en su odisea post-mortem, un viaje que lo lleva desde la confusi√≥n de una playa desolada hasta las cumbres de la Sierra de la Laguna, que se convierte en su Monta√±a del Purgatorio.
                        </p>
                    </div>
                    <div class="datos-proyecto">
                        <p><strong>G√âNERO:</strong> Drama / Fantas√≠a</p>
                        <p><strong>DURACI√ìN:</strong> 33 MIN.</p>
                    </div>
                </div>

                <div class="dante-tarot">
                    <h3 class="tarot-subtitle">Una lectura para tu viaje.</h3>
                    <div class="tarot-interactive-area">
                        <img src="imagenes/mazo-tarot.png" alt="Mazo de Tarot" id="tarot-deck" class="tarot-deck-image">
                        <button id="draw-tarot-btn" class="enlace-guion">Sacar una carta</button>
                    </div>
                    <div id="tarot-result-grid" class="tarot-grid">
                        </div>
                </div>
            </div>
        </section>

        <section id="poemas-apestosos" class="seccion-contenido seccion-poemas">
            <div class="container">
                <h2 class="titulo-dorado">Y UN PAR DE COCHINADAS M√ÅS.</h2>
                <div id="poema-display" class="dark-container" style="margin-bottom: 1rem;">
                    <h3 id="poema-titulo" class="titulo-dorado">Cargando poema...</h3>
                    <p id="poema-texto" style="white-space: pre-wrap; margin-top: 1rem; margin-bottom: 1.5rem; min-height: 150px;"></p>
                    <em id="poema-autor" style="display: block; text-align: right;"></em>
                </div>
                <div class="poemas-nav" style="text-align: center; margin-bottom: 2.5rem;">
                    <button id="prev-poema" class="poemas-nav-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="stroke: #fff;"><polyline points="15 18 9 12 15 6"></polyline></svg>
                    </button>
                    <button id="next-poema" class="poemas-nav-btn">
                        <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="stroke: #fff;"><polyline points="9 18 15 12 9 6"></polyline></svg>
                    </button>
                </div>
                <div style="text-align: center; margin-bottom: 2rem;">
                    <a href="#" id="leer-manuscrito-btn" class="enlace-guion">Leer Manuscrito</a>
                </div>
                <div id="manuscrito-container" class="dark-container" style="display: none;">
                    <div id="manuscrito-que-es" style="margin-bottom: 1.5rem;">
                        <h4 class="titulo-dorado"></h4>
                        <p></p>
                    </div>
                    <div id="manuscrito-por-que">
                        <h4 class="titulo-dorado"></h4>
                        <p></p>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <footer class="site-footer">
        <div class="footer-line"></div>
        <div class="footer-symbols">
            <a href="mailto:josh.adriansolana2@gmail.com" target="_blank">MAIL</a>
        </div>
        <div class="footer-line"></div>
        <p class="footer-title-reversed">omordn√≠laP oidutsE</p>
    </footer>

    <div id="email-modal" class="modal-overlay">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h3>Otra Fortuna a Cambio de un Contacto</h3>
            <p>Para descubrir otro destino, por favor deja tu correo o tu Instagram.</p>
            <form id="email-form">
                <input type="text" id="email-input" placeholder="correo@ejemplo.com o @usuario" required>
                <button type="submit" class="enlace-guion">Generar Fortuna</button>
            </form>
        </div>
    </div>

    <div id="tarot-modal" class="modal-overlay">
        <div class="modal-content tarot-modal-content">
            <span class="modal-close tarot-modal-close">&times;</span>
            <img id="tarot-modal-img" src="" alt="Carta de Tarot Ampliada">
            <h4 id="tarot-modal-title"></h4>
            <p id="tarot-modal-text"></p>
        </div>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollTrigger.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/ScrollToPlugin.min.js"></script>
    <script src="https://player.vimeo.com/api/player.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            gsap.registerPlugin(ScrollTrigger, ScrollToPlugin);

            // --- ANIMACI√ìN HERO ---
            gsap.to(".sirena-img", { scale: 1.1, ease: "none", scrollTrigger: { trigger: ".hero-sirena", start: "top top", end: "bottom top", scrub: 1.5 } });
            gsap.from(".titulo-hero", { opacity: 0, y: 50, ease: "power2.out", scrollTrigger: { trigger: ".hero-sirena", start: "top center", end: "center center", scrub: 1.5 } });

            // --- SLIDER 'SOBRE NOSOTROS' ---
            const slides = document.querySelector('.slides');
            const dots = document.querySelectorAll('.dot');
            if (slides && dots.length > 0) {
                const slideCount = dots.length;
                dots.forEach(dot => {
                    dot.addEventListener('click', () => {
                        const slideIndex = dot.getAttribute('data-slide');
                        slides.style.transform = `translateX(-${slideIndex * (100 / slideCount)}%)`;
                        dots.forEach(d => d.classList.remove('active'));
                        dot.classList.add('active');
                        document.querySelectorAll('.slide').forEach((slide, index) => {
                            slide.classList.toggle('active', index == slideIndex);
                        });
                    });
                });
            }

            // --- 'LA FORTUNA' ANIMATION & SLIDESHOW ---
            const galletaTrigger = document.getElementById('galleta-anim-trigger');
            if (galletaTrigger) {
                const frames = galletaTrigger.querySelectorAll(".galleta-secuencia");
                const frameCount = frames.length;
                const fortunaPapel = galletaTrigger.querySelector('.fortuna-papel');
                gsap.set(frames, { autoAlpha: 0 });
                gsap.set(frames[0], { autoAlpha: 1 });
                gsap.set(fortunaPapel, { autoAlpha: 0, scale: 0.8 });

                const tlCookie = gsap.timeline({
                    scrollTrigger: {
                        trigger: "#la-fortuna",
                        start: "top top",
                        end: "bottom bottom",
                        scrub: true,
                    }
                });

                const step = 1 / (frameCount + 1);
                frames.forEach((frame, i) => {
                    if (i > 0) tlCookie.set(frames[i - 1], { autoAlpha: 0 }, i * step);
                    tlCookie.set(frame, { autoAlpha: 1 }, i * step);
                });
                tlCookie.to(fortunaPapel, { autoAlpha: 1, scale: 1 }, 1 - step);
            }

            const backgroundImages = [ 'imagenes/fortuna-imagen-1.jpg', 'imagenes/fortuna-imagen-2.jpg', 'imagenes/fortuna-imagen-3.jpg', 'imagenes/fortuna-imagen-4.jpg', 'imagenes/fortuna-imagen-5.jpg' ];
            const fortunaBackgroundSlideshow = document.getElementById('fortuna-background-slideshow');
            if (fortunaBackgroundSlideshow) {
                let currentBackgroundIndex = 0;
                fortunaBackgroundSlideshow.style.backgroundImage = `url('${backgroundImages[0]}')`;
                gsap.to(fortunaBackgroundSlideshow, {opacity: 1, duration: 1});
                
                setInterval(() => {
                    currentBackgroundIndex = (currentBackgroundIndex + 1) % backgroundImages.length;
                    gsap.to(fortunaBackgroundSlideshow, {
                        opacity: 0, duration: 1,
                        onComplete: () => {
                            fortunaBackgroundSlideshow.style.backgroundImage = `url('${backgroundImages[currentBackgroundIndex]}')`;
                            gsap.to(fortunaBackgroundSlideshow, { opacity: 0.4, duration: 1 });
                        }
                    });
                }, 5000);
            }
            
            // --- MODAL Y BOT√ìN DE FORTUNA ---
            const generateFortuneBtn = document.getElementById('generate-fortune-btn');
            const emailModal = document.getElementById('email-modal');
            if (emailModal) {
                 const closeModalBtn = emailModal.querySelector('.modal-close');
                 const emailForm = document.getElementById('email-form');
                 if (generateFortuneBtn) {
                    generateFortuneBtn.addEventListener('click', () => emailModal.classList.add('visible'));
                 }
                 if (closeModalBtn) {
                    closeModalBtn.addEventListener('click', () => emailModal.classList.remove('visible'));
                 }
                  modal.addEventListener('click', (e) => {
                    if (e.target === modal) modal.classList.remove('visible');
                });
                 if (emailForm) {
                    emailForm.addEventListener('submit', (event) => {
                        event.preventDefault();
                        emailModal.classList.remove('visible');
                        generateFortune();
                    });
                 }
            }

            // --- L√ìGICA TAROT ---
            const tarotCardsData = [
                { name: "El Viaje Desolado", image: "imagenes/tarot-1.png", interpretation: "El viaje inicia con abandono, dejando atr√°s lo que ya no sirve." },
                { name: "La Soledad del Desierto", image: "imagenes/tarot-2.jpg", interpretation: "La soledad y aridez subrayan un aislamiento sin gu√≠a espiritual." },
                { name: "La Ascensi√≥n", image: "imagenes/tarot-3.jpeg", interpretation: "Una revelaci√≥n forzosa que impulsa a emprender la redenci√≥n." },
                { name: "El Para√≠so", image: "imagenes/tarot-4.jpg", interpretation: "La culminaci√≥n del viaje, un reencuentro que trae paz y gracia." }
            ];

            const drawTarotBtn = document.getElementById('draw-tarot-btn');
            const tarotResultGrid = document.getElementById('tarot-result-grid');
            const tarotModal = document.getElementById('tarot-modal');
            const tarotDeck = document.getElementById('tarot-deck');
            
            if(drawTarotBtn) {
                let currentTarotCardIndex = 0;

                function drawCard() {
                    if (currentTarotCardIndex >= tarotCardsData.length) return;

                    gsap.to(tarotDeck, { y: -20, duration: 0.1, yoyo: true, repeat: 1 });

                    const cardData = tarotCardsData[currentTarotCardIndex];
                    const cardElement = document.createElement('img');
                    cardElement.src = cardData.image;
                    cardElement.alt = cardData.name;
                    cardElement.className = 'tarot-card';
                    cardElement.style.opacity = 0;
                    
                    cardElement.addEventListener('click', () => {
                        document.getElementById('tarot-modal-img').src = cardData.image;
                        document.getElementById('tarot-modal-title').innerText = cardData.name;
                        document.getElementById('tarot-modal-text').innerText = cardData.interpretation;
                        tarotModal.classList.add('visible');
                    });

                    tarotResultGrid.appendChild(cardElement);
                    gsap.fromTo(cardElement, { opacity: 0, y: 50, scale: 0.8 }, { opacity: 1, y: 0, scale: 1, duration: 0.5, delay: 0.2 });

                    currentTarotCardIndex++;

                    if (currentTarotCardIndex >= tarotCardsData.length) {
                        drawTarotBtn.innerText = 'Lectura Completa';
                        drawTarotBtn.disabled = true;
                        gsap.to([drawTarotBtn, tarotDeck], {autoAlpha: 0.5, duration: 0.5});
                    }
                }
                
                drawTarotBtn.addEventListener('click', drawCard);
                tarotDeck.addEventListener('click', drawCard);

                const tarotModalClose = tarotModal.querySelector('.tarot-modal-close');
                tarotModalClose.addEventListener('click', () => tarotModal.classList.remove('visible'));
                tarotModal.addEventListener('click', (e) => {
                    if (e.target === tarotModal) tarotModal.classList.remove('visible');
                });
            }

            // --- L√ìGICA PARA POEMAS APESTOSOS ---
            const datosPoemas = {
                poemas: [
                    { titulo: "Oda al Calcet√≠n Perdido", autor: "An√≥nimo Desparejado", poema: "En el abismo del cesto te busqu√©,\nentre s√°banas y calzones me asom√©.\n¬øD√≥nde est√°s, mi fiel compa√±ero?\nSeguro te trag√≥ el agujero negro del lavadero." },
                    { titulo: "El Chicle Inmortal", autor: "Fil√≥sofo de la Acera", poema: "Pegado al suelo, ves pasar la vida,\nsoportas lluvias, sol y mil pisadas.\nEres m√°s duro que pol√≠tico en campa√±a,\ny m√°s eterno que la deuda de Espa√±a." },
                    { titulo: "Lamento del Wi-Fi Ca√≠do", autor: "El N√°ufrago Digital", poema: "Una barra, ninguna, parpadeas sin fin.\nMi mundo se detiene, oh, tr√°gico conf√≠n.\nSin memes, sin series, sin luz en mi existir,\n¬°vuelve, se√±al divina, o voy a sucumbir!" }
                ],
                manuscrito: {
                    queEs: { titulo: "¬øQu√© es un poema apestoso?", texto: "Es un verso sin verg√ºenza, un juego de palabras que prefiere la carcajada a la m√©trica. Nace de la observaci√≥n cotidiana, de lo absurdo y lo irreverente. No busca la inmortalidad en una antolog√≠a, sino una sonrisa c√≥mplice." },
                    porQue: { titulo: "¬øPor qu√© un poema apestoso?", texto: "Porque la poes√≠a tambi√©n puede re√≠rse de s√≠ misma, quitarse el cors√© y celebrar lo imperfecto. Un poema apestoso es una invitaci√≥n a escribir sin miedo al rid√≠culo, a encontrar una belleza extra√±a y divertida en lo inesperado." }
                }
            };
            const poemaTituloEl = document.getElementById('poema-titulo');
            const poemaTextoEl = document.getElementById('poema-texto');
            const poemaAutorEl = document.getElementById('poema-autor');
            const prevPoemaBtn = document.getElementById('prev-poema');
            const nextPoemaBtn = document.getElementById('next-poema');
            const leerManuscritoBtn = document.getElementById('leer-manuscrito-btn');
            const manuscritoContainer = document.getElementById('manuscrito-container');

            if (poemaTituloEl) {
                const todosLosPoemas = datosPoemas.poemas;
                let poemaActualIndex = 0;

                function mostrarPoema(index) {
                    const poema = todosLosPoemas[index];
                    gsap.to([poemaTituloEl, poemaTextoEl, poemaAutorEl], {
                        opacity: 0, duration: 0.2, onComplete: () => {
                            poemaTituloEl.textContent = poema.titulo;
                            poemaTextoEl.textContent = poema.poema;
                            poemaAutorEl.textContent = `- ${poema.autor}`;
                            gsap.to([poemaTituloEl, poemaTextoEl, poemaAutorEl], { opacity: 1, duration: 0.2 });
                        }
                    });
                }
                
                mostrarPoema(0);
                manuscritoContainer.querySelector('#manuscrito-que-es h4').textContent = datosPoemas.manuscrito.queEs.titulo;
                manuscritoContainer.querySelector('#manuscrito-que-es p').textContent = datosPoemas.manuscrito.queEs.texto;
                manuscritoContainer.querySelector('#manuscrito-por-que h4').textContent = datosPoemas.manuscrito.porQue.titulo;
                manuscritoContainer.querySelector('#manuscrito-por-que p').textContent = datosPoemas.manuscrito.porQue.texto;

                nextPoemaBtn.addEventListener('click', () => {
                    poemaActualIndex = (poemaActualIndex + 1) % todosLosPoemas.length;
                    mostrarPoema(poemaActualIndex);
                });
                prevPoemaBtn.addEventListener('click', () => {
                    poemaActualIndex = (poemaActualIndex - 1 + todosLosPoemas.length) % todosLosPoemas.length;
                    mostrarPoema(poemaActualIndex);
                });
                leerManuscritoBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    const isHidden = manuscritoContainer.style.display === 'none';
                    if (isHidden) {
                        gsap.fromTo(manuscritoContainer, { opacity: 0, height: 0 }, { display: 'block', opacity: 1, height: 'auto', duration: 0.4 });
                        leerManuscritoBtn.textContent = 'Ocultar Manuscrito';
                    } else {
                        gsap.to(manuscritoContainer, { opacity: 0, height: 0, duration: 0.4, onComplete: () => {
                            manuscritoContainer.style.display = 'none';
                        }});
                        leerManuscritoBtn.textContent = 'Leer Manuscrito';
                    }
                });
            }
        });

        async function generateFortune() {
            const fortunePaper = document.querySelector('.fortuna-papel');
            const generateBtn = document.getElementById('generate-fortune-btn');
            const apiKey = "AIzaSyB1ctZo6mjZVoM32LNw7liHQFB-J5kUxhA"; // Tu API Key
            
            generateBtn.innerText = 'Generando...';
            generateBtn.disabled = true;

            try {
                const prompt = "Escribe una fortuna para una galleta, en espa√±ol. Debe ser corta, po√©tica, y con un toque de melancol√≠a sobre el pasado, el amor perdido o el destino. Como si la hubiera escrito un escritor recordando su juventud. M√°ximo 20 palabras.";
                const payload = { contents: [{ role: "user", parts: [{ text: prompt }] }] };
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${apiKey}`;

                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(`Error en la API: ${response.statusText} - ${JSON.stringify(errorData)}`);
                }

                const result = await response.json();
                const newFortune = result.candidates[0].content.parts[0].text;
                fortunePaper.innerText = newFortune.trim().replace(/"/g, '');

            } catch (error) {
                console.error("Error al generar la fortuna:", error);
                fortunePaper.innerText = "El destino es incierto ahora. Intenta de nuevo m√°s tarde.";
            } finally {
                generateBtn.innerText = '‚ú® Pedir Otra Fortuna';
                generateBtn.disabled = false;
            }
        }
    </script>
</body>
</html>
